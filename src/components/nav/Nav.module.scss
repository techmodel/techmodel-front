@use 'sass:math';
@import '../../style/mixins';
@import '../../style/variables';

%container {
    background: var(--theme-main-color-dark);
    box-shadow: $box-shadow;
}

nav {
    @extend %container;

    z-index: 1;
    min-width: 6rem;
    position: relative;
}

.link,
%link {
    @include transition;

    cursor: pointer;
    height: $icon-size;
    font-size: 2.2rem;
    color: var(--theme-background-color);
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0.75;

    &:hover {
        opacity: 1;
    }

    &:global(.active) {
        opacity: 1;
        pointer-events: none;
    }
}

.user {
    @extend %link;
    @include transition;

    $box-shadow-size: 0 0 0 2px;
    $border-width: 2px;

    cursor: default;
    position: relative;
    width: $icon-size;
    height: $icon-size;
    border-radius: 100%;
    box-shadow: $box-shadow-size rgba(var(--theme-background-color-rgb), 0);
    opacity: 1 !important;

    &::before {
        @include transition;

        $half-border-width: math.div(-$border-width, 2);

        content: '';
        position: absolute;
        border-radius: 100%;
        width: calc(100% + #{$border-width});
        height: calc(100% + #{$border-width});
        top: $half-border-width;
        left: $half-border-width;
        background: rgba(var(--theme-background-color-rgb), .75);
        pointer-events: none;
    }

    &::after {
        @include transition;
        @include fit;

        content: '';
        border-radius: 100%;
        background: radial-gradient(circle, transparent 60%, black 100%);
        z-index: 2;
        opacity: 0.5;
        pointer-events: none;
    }

    &:hover {
        box-shadow: $box-shadow-size rgba(var(--theme-background-color-rgb), 0.75);

        &::before {
            transform: rotateZ(45deg);
        }

        &::after {
            opacity: 1;
        }
    }

    &:global(.active) {
        pointer-events: none;
        box-shadow: $box-shadow-size var(--theme-background-color);
    }

    > img {
        @include transition;

        border-radius: 100%;
        z-index: 1;
        opacity: 0.75;
    }

    &:hover > img {
        opacity: 1;
    }
}

.logoLink {
    height: 3.1rem;
}

.userDetailsContainer {
    @include transition;
    @extend %container;

    $offset: $gap;

    position: absolute;
    opacity: 0;
    bottom: 0;
    left: calc(100% + #{$offset});
    color: var(--theme-background-color);
    transform: translateX(-0.5rem);

    &:global(.entered) {
        opacity: 1;
        transform: translateX(0);
        pointer-events: all;
    }

    &::before {
        content: '';
        position: absolute;
        top: 0;
        left: -$offset * 2;
        width: $offset * 2;
        height: 100%;
        background: transparent;
    }
}

.userDetailsPicture {
    $size: 4.2rem;

    width: $size;
    height: $size;
    pointer-events: none;
}

.userDetailsName {
    font-weight: 600;
}
